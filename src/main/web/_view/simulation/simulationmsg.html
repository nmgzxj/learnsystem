#set(seoTitle="X2/3接口测试")
#@adminLayout()
#define main()
<link rel="stylesheet" href="/assets/css/index.css">
<script type="text/javascript">
sendMsg = function(){
	var form = document.getElementById("form1");
	form.action = '/admin/unit/x1MsgAdd';
	form.submit();
}

search = function(){
	var form = document.getElementById("form1");
	form.action = "/admin/unit/simulation1";
	form.handle.value = "search";
	form.submit();
}

</script>

<div class="jfa-header-box" id="jfa-header-box">
	<div class="jfa-crumbs" id="jfa-crumbs">
		#(seoTitle)
	</div>
	<div class="jfa-search-box"></div>
	#include("/_view/_admin/common/_header_right.html")
</div>

### 内容区域
<div class="jfa-content-box" id="jfa-content-box">
	<div class="jfa-content" id="jfa-content">

                <div class="am-u-sm-12 am-u-md-12 am-u-lg-12">
                    <div class="widget_heigh am-cf">
                        <div class="port_title">X2/3接口测试</div>

                        <div class="tabl_wrapper ">
                            <div class="select_wrapper am-fl"  style="float: left">
                                <div class="mt_bottom">
                                    <div class="am-form-group">
                                        <label class="am-checkbox-inline">
                                            <input type="checkbox" value="option1" id="show-table-one" checked="checked">显示X2列表
                                        </label>
                                        <label class="am-checkbox-inline">
                                            <input type="checkbox" value="option2" id="show-table-two">显示X3列表
                                        </label>
                                    </div>
                                </div>
						<form action="/admin/unit/simulationmsg" method="post" name="form1" id="form1" style="float: left">
						<input type="hidden" name="handle" value="">
                                <div class="mt_bottom">
                                    <span>请选择网元:</span>
                                    
                                        <select name="unit">
                                        	<option value=""></option>
                                        	#for(u:unitList)
                                            	<option value="#(u.id)">#(u.unitDesc)</option>
                                        #end
                                        		<option value="">ALL</option>
                                        </select>
                                    
                                </div>

                                <div class="mt_bottom">
                                    <span>请选择消息类型:</span>
                                    <div>
                                        <select name="msgType" style="width: 213px;">
                                             <option value="">ALL</option>
                                            <option value="b1">MME 用户附着</option>
                                            <option value="b2">MME 用户分离</option>
                                            <option value="b3">SGW、PGW 承载激活（缺省默认承载）</option>
                                            <option value="b4">SGW、PGW隧道建立</option>
                                            <option value="b5">SGW承载修改</option>
                                            <option value="b6">SGW、PGW 隧道关闭</option>
                                            <option value="b7">SGW、PGW承载去激活</option>
                                            <option value="b8">SGW、PGW 承载激活（专有承载）</option>
                                            <option value="b12">跟踪区更新 （MME） MME不变</option>
                                            <option value="b13">跟踪区更新 （MME） MME改变（旧）</option>
                                            <option value="b14">跟踪区更新 （MME） MME改变（新）</option>
                                            <option value="b15">跟踪区更新 （MME） 4G切换到3G</option>
                                            <option value="b16">跟踪区更新 （MME） 3G切换到4G</option>
                                            <option value="b17">切换（MME）</option>
                                            <option value="b18">EPC用户在线通知（SGW、PGW）</option>
                                            <option value="b19">2/3g用户在线通知</option>
                                            <option value="b20">已附着用户通知（MME）</option>
                                            <option value="b21">MB信息更改通知（HSS）</option>
                                            <option value="b22">告警</option>
                                            <option value="c1">创建隧道</option>
                                            <option value="c2">删除隧道</option>
                                            <option value="c3">通信内容报告</option>
                                            <option value="c4">隧道检测</option>
                                           
                                        </select>
                                    </div>
                                </div>


                                <div>
                                            <button class="btn btn-info btn-sm" onclick="search()">消息筛选</button>
                                            <button class="btn btn-danger btn-sm" onclick="data_delete()">清除X2X3数据</button>
                                       <!--  <li class="btn_select am-fl">
                                            <button onclick="search()">X3消息筛选</button>
                                        </li> -->
                                </div>
                                </form>
                                <br>

                            </div>
            
                            <div class="table_box">
                            <div id="table_one">
                            
                                <table class="table table-bordered table-hover margin-bottom-10">
                                    <thead>
                                    <tr>
                                        <th>网元</th>
                                        <th>Ne X2地址</th>
                                        <th>消息类型</th>
                                        <th>目标标识</th>
                                        <th>目标类型</th>
                                        <th>关联标识1</th>
                                        <th>关联标识2</th>
                                        <th>事件序列号</th>
                                        <th>呼叫序列号</th>
                                        <th>呼叫子序列号</th>
                                        <th>事件时间</th>
                                        <th>操作</th>
                                    </tr>
                                    </thead>

                                    <tbody>
                                    #for(x2:x2MsgList)
                                        <tr>
                                            <td>#(x2.unitIdView)</td>
                                            <td>#(x2.neX2Addr)</td>
                                            <td>#(x2.msgType)</td>
                                            <td>#(x2.perposeId)</td>
                                            <td>#(x2.perposeType)</td>
                                            <td>#(x2.relation1)</td>
                                            <td>#(x2.relation2)</td>
                                            <td>#(x2.eventSn)</td>
                                            <td>#(x2.callSn)</td>
                                            <td>#(x2.callSnChild)</td>
                                            <td>#(x2.eventTime)</td>
<!-- 弹出显示 -->
                            <div class="modal fade" id="myModal#(x2.id)" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                                        <div class="modal-dialog" role="document">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                        <span aria-hidden="true">&times;</span>
                                                    </button>
                                                </div>
                                                <div class="modal-body">
                                                    <p>#((com.cjih.learnsystem.common.util.Encrypt::decode(x2.memo)).replaceAll("\n","<br>")))
                                                        <br>
                                                    </p>
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                     <!-- 弹出显示 -->
                                            <td><a href="#" data-toggle="modal" data-target="#myModal#(x2.id)">查看</a></td>
                                        </tr>
                                    #end
                                    </tbody>
                                </table>
</div>
<div  id="table_two">
                                <table class="table table-bordered table-hover margin-bottom-10" >
                                    <thead>
                                    <tr>
                                        <th>网元</th>
                                        <th>LIC X3地址</th>
                                        <th>消息类型</th>
                                        <th>目标标识</th>
                                        <th>目标类型</th>
                                        <th>关联标识1</th>
                                        <th>关联标识2</th>
                                        <th>消息序列号</th>
                                        <th>对端地址</th>
                                        <th>操作结果</th>
                                        <th>文件名称</th>
                                        <th>事件时间</th>
                                        <th>操作</th>
                                    </tr>
                                    </thead>

                                    <tbody>
                                    #for(x3:x3MsgList)
                                        <tr>
                                            <td>#(x3.unitIdView)</td>
                                            <td>#(x3.licX3Addr)</td>
                                            <td>#(x3.msgType)</td>
                                            <td>#(x3.perposeId)</td>
                                            <td>#(x3.perposeType)</td>
                                            <td>#(x3.relation1)</td>
                                            <td>#(x3.relation2)</td>
                                            <td>#(x3.msgSn)</td>
                                            <td>#(x3.oppositeAddr)</td>
                                            <td>#(x3.operationResult)</td>
                                            <td>#(x3.fileName)</td>
                                            <td>#(x3.eventTime)</td>
                                            <!-- 弹出显示 -->
                            <div class="modal fade" id="myModal#(x3.id)" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                                        <div class="modal-dialog" role="document">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                        <span aria-hidden="true">&times;</span>
                                                    </button>
                                                </div>
                                                <div class="modal-body">
                                                    <p>#((com.cjih.learnsystem.common.util.Encrypt::decode(x3.memo)).replaceAll("\n","<br>"))
                                                        <br>
                                                    </p>
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                     <!-- 弹出显示 -->
                                            <td><a href="#" data-toggle="modal" data-target="#myModal#(x3.id)">查看</a></td>
                                        </tr>
                                    #end
                                    </tbody>
                                </table>
                     </div>
                            </div>
                        </div>


                    </div>
                </div>


            </div>

        </div>


<script src="/assets/js/amazeui.min.js"></script>
<script src="/assets/js/amazeui.datatables.min.js"></script>
<script src="/assets/js/dataTables.responsive.min.js"></script>
<script src="/assets/js/app.js"></script>
<script src="/assets/js/Questions.js"></script>
<script src="/assets/js/index.js"></script>
<script>
sendMsg = function(addMsg){
	var form = document.getElementById('form1');
	if(form.unit.value==''){
		alert('请选择网元。')
		return false;
	}
	form.action='/unit/'+addMsg;
	form.submit();
}


search = function(){
	var form = document.getElementById("form1");
//	form.action = "/unit/simulation1";
	form.handle.value = "search";
	form.submit();
}

</script>
<script type="text/javascript"  >
function data_delete(){
	if(confirm('确定要删除这些数据吗？')) 
    var jqxhr = $.ajax( "/admin/system/datax2x3_delete?table=tx2msg")
        .done(function() {
            alert( "数据已删除。" );
            window.open("/admin/unit/simulationmsg","_self");
        })
        .fail(function() {
            alert( "出现错误，数据删除未成功。" );
        })
}

</script>  
</body>

</html>
#end
